diff --git a/node_modules/bmaplib.lushu/index.js b/node_modules/bmaplib.lushu/index.js
index a793df6..7cd3016 100644
--- a/node_modules/bmaplib.lushu/index.js
+++ b/node_modules/bmaplib.lushu/index.js
@@ -4,8 +4,8 @@
     } else if (typeof define === 'function' && define.amd) {
         define(factory);
     } else {
-        root.BMapLib = root.BMapLib || {};
-        root.BMapLib.LuShu = root.BMapLib.Lushu || factory();  
+        root.BMapGLLib = root.BMapGLLib || {};
+        root.BMapGLLib.LuShu = root.BMapGLLib.Lushu || factory();
     }
 })(this, function() {
     var baidu = {};
@@ -148,11 +148,11 @@
     };
 
     /**
-     * @exports LuShu as BMapLib.LuShu
+     * @exports LuShu as BMapGLLib.LuShu
      */
     var LuShu = function(map, path, opts) {
         try {
-            BMap;
+            BMapGL;
         } catch (e) {
             throw Error('Baidu Map JS API is not ready yet!');
         }
@@ -161,9 +161,8 @@
         }
         this._map = map;
         this._path = path;
-        this.i = 0;
+        this.i = -1;
         this._setTimeoutQuene = [];
-        this._projection = this._map.getMapType().getProjection();
         this._opts = {
             icon: null,
             speed: 4000,
@@ -173,7 +172,7 @@
         this._setOptions(opts);
         this._rotation = 0;
 
-        if (!this._opts.icon instanceof BMap.Icon) {
+        if (!this._opts.icon instanceof BMapGL.Icon) {
             this._opts.icon = defaultIcon;
         }
     }
@@ -191,14 +190,15 @@
         var me = this,
             len = me._path.length;
         this._opts.onstart && this._opts.onstart(me)
-        if (me.i && me.i < len - 1) {
+        if (me.i != -1 && me.i < len - 1) {
             if (!me._fromPause) {
                 return;
             }else if(!me._fromStop){
 	            me._moveNext(++me.i);
             }
         }else {
-            !me._marker && me._addMarker();
+            me.i = 0;
+            me._addMarker();
             me._timeoutFlag = setTimeout(function() {
                     !me._overlay && me._addInfoWin();
                     me._moveNext(me.i);
@@ -208,7 +208,7 @@
         this._fromStop = false;
     },
     LuShu.prototype.stop = function() {
-        this.i = 0;
+        this.i = -1;
         this._fromStop = true;
         clearInterval(this._intervalFlag);
         this._clearTimeout();
@@ -247,7 +247,7 @@
                 clearTimeout(this._timeoutFlag);
             }
             this._overlay && this._map.removeOverlay(this._overlay);
-            var marker = new BMap.Marker(this._path[0]);
+            var marker = new BMapGL.Marker(this._path[0]);
             this._opts.icon && marker.setIcon(this._opts.icon);
             this._map.addOverlay(marker);
             marker.setAnimation(BMAP_ANIMATION_DROP);
@@ -263,35 +263,42 @@
             this._opts.showInfoWindow ? this.showInfoWindow() : this.hideInfoWindow()
         },
         _getMercator: function(poi) {
-            return this._map.getMapType().getProjection().lngLatToPoint(poi);
+            return this._map.pointToPixel(poi);
         },
         _getDistance: function(pxA, pxB) {
             return Math.sqrt(Math.pow(pxA.x - pxB.x, 2) + Math.pow(pxA.y - pxB.y, 2));
         },
-        _move: function(initPos,targetPos,effect) {
+        _move: function(initPos,targetPos,effect, index) {
             var me = this,
                 currentCount = 0,
                 timer = 10,
                 step = this._opts.speed / (1000 / timer),
-                init_pos = this._projection.lngLatToPoint(initPos),
-                target_pos = this._projection.lngLatToPoint(targetPos),
-                count = Math.round(me._getDistance(init_pos, target_pos) / step);
+                init_pos = function () {
+                    return me._map.pointToPixel(initPos)
+                },
+                target_pos = function () {
+                    return me._map.pointToPixel(targetPos)
+                },
+                count = Math.round(me._getDistance(init_pos(), target_pos()) / step);
             if (count < 1) {
+                me._opts.onTick && me._opts.onTick(index);
                 me._moveNext(++me.i);
                 return;
             }
             me._intervalFlag = setInterval(function() {
 	            if (currentCount >= count) {
+                  me._opts.onTick && me._opts.onTick(index);
 	                clearInterval(me._intervalFlag);
-		        	if(me.i > me._path.length){
-						return;
-		        	}
+                  if(me.i > me._path.length){
+                      me._opts.onTick && me._opts.onTick(index);
+                    return;
+                  }
 	                me._moveNext(++me.i);
 	            } else {
                     currentCount++;
-                    var x = effect(init_pos.x, target_pos.x, currentCount, count),
-                        y = effect(init_pos.y, target_pos.y, currentCount, count),
-                        pos = me._projection.pointToLngLat(new BMap.Pixel(x, y));
+                    var x = effect(init_pos().x, target_pos().x, currentCount, count),
+                        y = effect(init_pos().y, target_pos().y, currentCount, count),
+                        pos = me._map.pixelToPoint(new BMapGL.Pixel(x, y));
                     if(currentCount == 1){
                         var proPos = null;
                         if(me.i - 1 >= 0){
@@ -352,8 +359,9 @@
         _moveNext: function(index) {
             var me = this;
             if (index < this._path.length - 1) {
-                me._move(me._path[index], me._path[index + 1], me._tween.linear);
+                me._move(me._path[index], me._path[index + 1], me._tween.linear, index);
             } else {
+                me._opts.onTick && me._opts.onTick(index);
                 me.stop()
             }
         },
@@ -394,7 +402,7 @@
             var t = this._opts.landmarkPois, distance;
             for (var i = 0, len = t.length; i < len; i++) {
                 if (!t[i].bShow) {
-                    distance = this._map.getDistance(new BMap.Point(t[i].lng, t[i].lat), markerPoi);
+                    distance = this._map.getDistance(new BMapGL.Point(t[i].lng, t[i].lat), markerPoi);
                     if (distance < 10) {
                         t[i].bShow = true;
                         return i;
@@ -410,7 +418,7 @@
     }
 
     function initCustomOverlay() {
-        CustomOverlay.prototype = new BMap.Overlay();
+        CustomOverlay.prototype = new BMapGL.Overlay();
         CustomOverlay.prototype.initialize = function(map) {
             var div = this._div = baidu.dom.create('div', {style: 'border:solid 1px #ccc;width:auto;min-width:50px;text-align:center;position:absolute;background:#fff;color:#000;font-size:12px;border-radius: 10px;padding:5px;white-space: nowrap;'});
             div.innerHTML = this._html;
